[{"title":"Generador de Señales con Microcontrolador Pic","date":"","description":"","body":"Los generadores de señales son unos dispositivos muy útiles en caso de que queramos observar el comportamiento de un circuito para diferentes señales de entrada, en este post se explicará como hacer uno con algunas características básicas pero puede ser tomado como base para un proyecto aun más complejo. En este post hablaremos un poco de programación en C y Python, si no estás muy familiarizado con estos lenguajes no te preocupes, ya que explicaremos cada línea paso por paso, sin embargo es importante que tengas noción de las estructuras básicas de programación.\nLista de Materiales:\n Microcontrolador PIC 16f84A 9 Resistencias de 20kΩ 8 Resistencias de 10kΩ Pulsador Fuente de Alimentación  Para este ejemplo estaremos usando el microcontrolador PIC 16f84A, pero es posible utilizar cualquier otro microcontrolador siempre y cuando tenga 2 puertos, y uno de ellos sea de 8 bits. El funcionamiento del generador de señales que estaremos armando se basa en el principio del convertidor Digital - Analógico (ADC), mediante el codigo que cargaremos al microcontrolador tendremos una salida digital de 8 bits variante en el tiempo y a través del uso del ADC generaremos la señal deseada.\nSi no estás muy familiarizado con el funcionamiento del convertidor ADC te recomendamos que visites nuestro post referente a los ADC aquí.\nA continuación se muestra el codigo que estaremos empleando, es importante destacar que estamos utilizando el compilador PIC C Compiler por lo que puede tener ciertas diferencias con el tuyo en específico, sin embargo las funciones en todos los compiladores son muy similares.\n // Directivas de Preprocesado #include #include #fuses XT, NOWDT, NOPROTECT // Definiendo la Velocidad del Reloj 4MHz #use delay (clock = 4000000) // Definiendo el puerto predeterminado al puerto B #use standard_io(b) // Inicialización de variables int i = 0; int j = 0x00; int sel = 0; int seno[52] = {128, 143, 159, 174, 188, 201, 213, 224, 234, 242, 248, 252, 254, 255, 253, 250, 245, 238, 229, 219, 207, 195, 181, 166, 151, 135, 120, 104, 89, 74, 60, 48, 36, 26, 17, 10, 5, 2, 0, 1, 3, 7, 13, 21, 31, 42, 54, 67, 81, 96, 112, 127}; void main(){ // Definiendo Función de los pines de los puertos // \"0\" para usar los puertos como salida // \"1\" para usarlos como entradas set_tris_b(0x00); set_tris_a(0b00011111); // Inicializando los pines del puerto B a 0 output_b(0); while(TRUE){ // Leemos el pin 0 del puerto A, si el botón está presionado incrementa en 1 la variable de selección if(input(PIN_A0)){ sel++; // Debemos ponerle cierto delay para que evite detectar pulsaciones repetidas delay_ms(100); // En caso de que el selector llegue a la 3era señal y se vuelva a presionar se reinicia if(sel=3){ sel = 0; } } // Si el selector se encuentra en 0 la salida es la onda cuadrada if(sel == 0){ if(i==255){ i=0; }else{ if(i El funcionamiento del codigo es bastante sencillo, simplemente iniciamos un ciclo que estará activo todo el tiempo y que se encargará de verificar la señal que tenemos seleccionada y generarla. Basicamente al momento de presionar el pulsador, cambiará la variable de selección y dependiendo del valor de esa variable, la señal de salida será una u otra. Onda Cuadrada\nPara el caso de la onda cuadrada, tendremos un contador que irá desde 0 a 255, y se estará incrementando cada pulso de reloj, para esta forma de onda se requiere que la mitad del ciclo de trabajo tenga tensión y la otra mitad no la tenga, por lo tanto cuando el contador alcanza la mitad del valor máximo varía a su segundo estado, si el contador alcanza el limite máximo se reinicia, volviendo a comenzar de nuevo.\nOnda Diente de Sierra\nLa señal diente de sierra tiene una forma particular, la cual va incrementando su valor progresivamente hasta llegar a su máximo donde se reinicia, por lo tanto solo fue necesario el uso de un contador que al llegar a 256 volviera a comenzar, dando como resultado la forma de onda deseada.\nOnda Senoidal\nPara la onda senoidal el proceso es algo más complejo, debido a que el dispositivo no dispone de mucha memoria RAM, no es posible calcular los valores de la señal senoidal en tiempo real, por lo tanto es necesario precargar en la memoria del dispositivo los valores a ejecutar. Para ello se empleo un array de enteros con los valores precalculados y posteriormente se iba leyendo dicho array con el contador usado en la onda cuadrada.\nSi deseas obtener los valores para la señal senoidal puedes emplear varios métodos, a continuación se muestra un código básico de python que genera un número determinado de valores de la función seno:\n  import math // Creación del array para los valores numeros = [] // Ciclo con 255 valores que avanza en pasos de 5 // Si posees un microcontrolador de mayor capacidad puedes emplear más valores // y tendrá una forma más fiel a la función seno for i in range(0,256,5): // Regla de 3 para convertir el valor de i en un angulo no mayor a 360° angle = (i*360.0)/255.0; // Convirtiendo el angulo obtenido a radianes radian = angle*math.pi/180.0; // Determinando el seno del angulo y sumando 1 para evitar valores negativos angleSin = math.sin(radian)+1.0; // Aplicando una regla de 3 nuevamente para tener valores entre 0 y 255 digital = round(angleSin*255.0/2.0); // Anexando los valores al array numeros.append(digital) print(numeros)   Ejecutando el codigo anterior puedes obtener una serie de valores de la onda seno que van entre 0 y 255 para ser enviados al puerto B directamente. Luego de haber compilado y cargado el programa en el microcontrolador, procedemos a realizar el montaje del circuito del esquema.\n  La simulación anterior muestra un osciloscopio conectado a la salida del convertidor ADC, dando como resultado las siguientes salidas:   Gracias por leer! Śiguenos y no te pierdas los demás proyectos que publicamos. ","ref":"/es/projects/wave-generator/"},{"title":"Qué es más peligroso, la corriente o el voltaje?","date":"","description":"Un vistazo a las principales características y diferencias entre ellos","body":"Alguna vez has recibido una descarga manipulando un electrodoméstico? Si la respuesta es afirmativa te sentirás identificado con el tema que hablaremos hoy, y si nunca te ha ocurrido sigue leyendo y sabrás como evitarlas en un futuro. La energía eléctrica es parte fundamental de nuestras vidas, la podemos ver en todas partes y sin ella no viviríamos en la sociedad moderna que hoy tenemos, sin embargo así como es uno de los ejes de la sociedad actual, tambien existe mucho desconocimiento acerca de la misma y a lo largo de este post se estarán aclarando algunos conceptos básicos y algunas medidas de seguridad que se deben tener en cuenta.\nUno de los mitos más extendidos actualmente, es el hecho de que el alto voltaje es el causante de la mayoría de los accidentes eléctricos, y aunque en parte es cierto, se debe tener en cuenta que hay más factores involucrados y en ocasiones puede ser igual de letal el flujo de corriente de miles de voltios que un flujo de corriente causado por unos pocos voltios.\nSegún la ley de Ohm, el voltaje es igual a la resistencia multiplicada por la corriente:\n$$V=I \\cdot R$$ La resistencia es la oposición que presentan los materiales al flujo de corriente, un buen conductor como lo puede ser el cobre o el oro presenta una resistencia baja, mientras que un material aislante como la madera o la goma presentan una resistencia alta.\nEn cuanto a nuestro cuerpo, la resistencia de la piel seca es de alrededor de unos 4000 Ohms, esto quiere decir que para un voltaje bajo como lo puede ser una bateria AA (1.5 V), la corriente que fluye a través de nuestro cuerpo es bastante pequeña (aproximadamente 0.3 mA), sin embargo cuando las tensiones comienzan a ser más altas, los riesgos de lesión se incrementan.\nA continuación se muestra una tabla de los efectos de la corriente para sus diferentes valores:\nCorrienteReacción 1 mANivel de Percepción. Solo un ligero cosquilleo 5 mASe siente un ligero shock, no doloroso pero molesto. El individuo promedio puede liberarse del circuito. SIn embargo fuertes reacciones involuntarias en este rango pueden causar heridas 6 - 25 mA(Mujeres) Shock Doloroso, pérdida de control muscular 9 - 30 mA(Hombres) Este es el valor límite en que puede liberarse del circuito por sí mismo 50 - 150 mADolor extremo, paro respiratorio, contracciones musculares severas. La persona no puede liberarse 1000 - 4300 mAFibrilación Ventricular. Cesa el bombeo rítmico del corazón. Ocurren daños al sistema nervioso y contracción muscular involuntaria. Muerte muy probable 10000 mAParo Cardíaco, quemaduras severas y probable muerte.  Aplicando la ley de Ohm para los valores de la tabla y tomando en cuenta la resistencia de la piel, es posible observar que para el caso de 30 mA son necesarios 120V, el cual es el valor de tensión doméstica más común en latino américa, cabe destacar que estos valores son obtenidos cuando son tocados ambos bornes de una fuente de tensión sin nada más conectado, pero qué ocurriría si hay otro elemento de por medio? Como una lampara o un electrodoméstico? Bueno la respuesta a esa duda se encuentra en la asociación de resistencias, todo equipo o electrodoméstico puede ser representado como una resistencia de mayor o menor valor. Tomemos el ejemplo de una lámpara de 12 V y 8 amperios, como podemos observar la corriente que fluye a través de la lampara es mucho mayor a la necesaria para causar algún daño, la clave está en que toda esa corriente no fluye a través del cuerpo humano, veamos el por qué.\nSi se aplica la ley de Ohm para la lámpara de 12 V tenemos:\n$$R = \\frac V I = \\frac {12}{8} = 1.5 \\Omega$$ Se puede observar que la resistencia de la lámpara es bastante pequeña con respecto al valor de la resistencia de la piel humana, si la lámpara es conectada a la bateria en un extremo y en el otro extremo nos encontramos nosotros, el circuito que formaríamos es el siguiente:\n  En este caso la resistencia de la lampara se suma a la de nuestro cuerpo, siendo la resistencia total igual a 4001.5 Ohms de tal forma que por ley de ohm la corriente en el circuito va a ser menos de 3 mA, la lampara no se encenderá y la corriente será inofensiva para nosotros. Otra situación posible es la siguiente:\n  Cuando dos resistencias se encuentran en paralelo, el voltaje en cada una de ellas es el mismo, por lo tanto es posible aplicar la ley de ohm independientemente, de tal forma que para la lámpara, la corriente resultante van a ser los 8 amperios requeridos y la misma se va a encender, sin embargo la resistencia de nuestro cuerpo sigue siendo de un gran valor, y la corriente a través de él seguirá sin superar los 3 mA. Hasta ahora hemos venido empleando un valor constante para la resistencia de la piel, pero es importante destacar que dicho valor va a depender de otros factores, como pueden serlo la edad, características ambientales, etc. Un factor a tener en cuenta es la humedad, a mayor humedad, menor será la resistencia de la piel, por lo tanto se alcanzarán valores de corrientes más altos incluso con voltajes inferiores.\nEn conclusión es importante tomar precaución cuando se está trabajando con voltajes elevados, sin embargo no se deben tomar a la ligera los voltajes pequeños, ya que como se demostró anteriormente incluso con voltajes de menor magnitud se pueden alcanzar corrientes significativas.\nFinalmente, como recomendaciones se tienen, siempre realizar las conexiones con la fuente apagada para evitar cualquier tipo de riesgo y bajo ninguna circunstancia trabajar con corriente eléctrica bajo condiciones de humedad, de igual forma se recomienda tener siempre equipamiento de seguridad como lo son guantes de protección y el calzado aislante pertinente.\n MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\\\(','\\\\)']], displayMath: [['$$','$$'], ['\\[','\\]']], processEscapes: true, processEnvironments: true, skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'], TeX: { equationNumbers: { autoNumber: \"AMS\" }, extensions: [\"AMSmath.js\", \"AMSsymbols.js\"] } } });  MathJax.Hub.Queue(function() { // Fix  tags after MathJax finishes running. This is a // hack to overcome a shortcoming of Markdown. Discussion at // https://github.com/mojombo/jekyll/issues/199 var all = MathJax.Hub.getAllJax(), i; for(i = 0; i ","ref":"/es/blog/current-or-voltage/"},{"title":"Contacto","date":"","description":"","body":"","ref":"/es/contact/"}]